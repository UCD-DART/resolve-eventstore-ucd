{"version":3,"sources":["../../src/js/freeze.js"],"names":["freeze","executeStatement","databaseName","eventsTableName","escapeId","databaseNameAsId","freezeTableNameAsId"],"mappings":";;;;;;;AAAA,MAAMA,MAAM,GAAG,OAAO;AACpBC,EAAAA,gBADoB;AAEpBC,EAAAA,YAFoB;AAGpBC,EAAAA,eAHoB;AAIpBC,EAAAA;AAJoB,CAAP,KAKT;AACJ,QAAMC,gBAAgB,GAAGD,QAAQ,CAACF,YAAD,CAAjC;AACA,QAAMI,mBAAmB,GAAGF,QAAQ,CAAE,GAAED,eAAgB,SAApB,CAApC;AAEA,QAAMF,gBAAgB,CACnB,8BAA6BI,gBAAiB,IAAGC,mBAAoB;;;;uBAInDD,gBAAiB,IAAGC,mBAAoB;8BACjCA,mBAAoB;KAN1B,CAAtB;AASD,CAlBD;;eAoBeN,M","sourcesContent":["const freeze = async ({\n  executeStatement,\n  databaseName,\n  eventsTableName,\n  escapeId,\n}) => {\n  const databaseNameAsId = escapeId(databaseName)\n  const freezeTableNameAsId = escapeId(`${eventsTableName}-freeze`)\n\n  await executeStatement(\n    `CREATE TABLE IF NOT EXISTS ${databaseNameAsId}.${freezeTableNameAsId} (\n      \"surrogate\" BIGINT NOT NULL,\n      PRIMARY KEY(\"surrogate\")\n    );\n    COMMENT ON TABLE ${databaseNameAsId}.${freezeTableNameAsId}\n    IS 'RESOLVE EVENT STORE ${freezeTableNameAsId} FREEZE MARKER';\n    `\n  )\n}\n\nexport default freeze\n"],"file":"freeze.js"}